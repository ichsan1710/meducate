<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/app.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <header class="header">
      <section class="flex">
        <a href="/users/role/home" class="logo">Meducate</a>

        <div class="icons">
          <div id="user-btn" class="fas fa-user"></div>
        </div>

        <div class="profile">
          <img src="/asset/Pas Foto.jpg" class="image" alt="" />
          <h3 class="name"><%= user.username %></h3>
          <p class="role"><%= user.role %></p>
          <a href="/users/role/profile" class="btn btn-primary">view profile</a>
          <div class="flex-btn">
            <a href="/users/logout" class="btn btn-danger">Logout</a>
          </div>
        </div>
      </section>
    </header>

    <div class="container">
      <div class="card mt-4">
        <div class="card-header">
          <h4 class="card-title">Profile</h4>
        </div>
        <div class="card-body">
          <div class="profile mb-2">
            <img
              src="/asset/Pas Foto.jpg"
              class="image"
              alt=""
              style="height: 100px; border-radius: 50%"
            />
          </div>

          <form method="post">
            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label">Age</label>
              <input
                type="text"
                readonly
                value="<%= userProfile.getAge() %>"
                class="form-control"
                id="exampleInputPassword1"
              />
            </div>

            <div class="mb-3">
              <label for="exampleInputPassword1" class="form-label"
                >Birth of Date</label
              >
              <input
                class="form-control"
                type="date"
                id="date"
                value="<%= userProfile.dateBirth ? userProfile.dateBirth.toISOString().split('T')[0] : '' %>"
                name="dateBirth"
              />
              <br />
            </div>
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Bio</label>
              <textarea class="form-control" name="bio"><%= userProfile.bio %></textarea>
            </div>

            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Description</label>
              <textarea name="otherDetails" class="form-control"><%= userProfile.otherDetails %></textarea>
            </div>

            <button type="submit" class="btn btn-primary form-control">
              Save
            </button>
          </form>
        </div>
      </div>
    </div>

    <script>
      function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[[]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
          results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return "";
        return decodeURIComponent(results[2].replace(/\+/g, " "));
      }

      // Get the value of the 'message' parameter from the current URL
      var messageValue = getParameterByName("message");
      let messageElement = document.getElementById("message");
      messageElement.textContent = messageValue;
    </script>

    <script src="/javascripts/index.js"></script>
  </body>
</html>
